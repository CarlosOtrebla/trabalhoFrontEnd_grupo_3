<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LOJA VIRTUAL - LOGIN</title>
    <link rel="stylesheet" href="./styles/login.css">
</head>

<body>
    <div id="voltar">
        <a href="index.html"><img src="/assets/botaoVoltar.png" alt=""></a>
    </div>


    <div id="formulario">
        <img class="" src="./assets/SerraTecShopLogin.png" alt="Serratec Shop Log Tela de login">

        <form action="#" class="formAction" onsubmit="return fazerLogin()">

            <section class="sec-name">
                <label for="username">Usu치rio</label>
                <input type="text" id="username" name="username" placeholder="Digite seu usu치rio" onkeyup="habilitarBotao()" required>
                   
            </section>
            <section class="sec-senha">
                <label for="senha">Senha</label>
                <input type="password" id="senha" name="senha" placeholder="Digite sua senha" onkeyup="habilitarBotao()" required>
                   
            </section>

            <button type="submit" id="entrar" disabled ></button>
        </form>
    </div>

    <script>

        async function fazerLogin() {
            event.preventDefault();

            const username = document.getElementById('username').value;
            const senha = document.getElementById('senha').value;

            const response = await fetch('usuarios.json');
            const data = await response.json();
            console.log(data.listUsers)
            const usuarios = (data.listUsers);
            console.log(usuarios)

            const usuarioEncontrado = usuarios.find(usuario => usuario.usuario === username && usuario.senha == senha);

            if (usuarioEncontrado) {
                alert('Login bem sucedido! Bem-vindo, ' + usuarioEncontrado.nome);

                document.getElementById('username').value = "";
                document.getElementById('senha').value = "";
                window.location.href = "index.html";       


                
            } else {
                alert('Usu치rio ou senha inv치lidos. Por favor, tente novamente.');
                document.getElementById('username').value = "";
                document.getElementById('senha').value = "";
            }

            return false;
        }

    </script>


    <script src="./scripts/login.js"></script>
</body>

</html>